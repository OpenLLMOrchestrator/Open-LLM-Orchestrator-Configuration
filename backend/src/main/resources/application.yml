# All values can be overridden via environment variables (e.g. SERVER_PORT, OLO_TEMPLATES_DIR).
# See .env.example and docker-compose for full list.

spring:
  application:
    name: ${SPRING_APPLICATION_NAME:olo-config-backend}
  datasource:
    url: ${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/temporal}
    driver-class-name: ${SPRING_DATASOURCE_DRIVER:org.postgresql.Driver}
    username: ${SPRING_DATASOURCE_USERNAME:temporal}
    password: ${SPRING_DATASOURCE_PASSWORD:pgpass}
  h2:
    console:
      enabled: ${SPRING_H2_CONSOLE_ENABLED:false}
  jpa:
    hibernate:
      ddl-auto: ${SPRING_JPA_HIBERNATE_DDL_AUTO:update}
    show-sql: ${SPRING_JPA_SHOW_SQL:false}
    database-platform: ${SPRING_JPA_DATABASE_PLATFORM:org.hibernate.dialect.PostgreSQLDialect}
    defer-datasource-initialization: true
    open-in-view: false
  sql:
    init:
      # Run schema.sql (and data.sql) at bootstrap so tables exist before any code runs.
      mode: always
    properties:
      hibernate:
        format_sql: true
  data:
    redis:
      host: ${SPRING_DATA_REDIS_HOST:localhost}
      port: ${SPRING_DATA_REDIS_PORT:6379}
      password: ${SPRING_DATA_REDIS_PASSWORD:}
      timeout: ${SPRING_DATA_REDIS_TIMEOUT:2000ms}

server:
  port: ${SERVER_PORT:8082}
  # Set SERVER_ADDRESS=0.0.0.0 in Docker so the app is reachable from the host
  address: ${SERVER_ADDRESS:}

olo:
  redis:
    enabled: ${OLO_REDIS_ENABLED:true}
    config-key-prefix: ${OLO_REDIS_CONFIG_KEY_PREFIX:olo:config:}
    engine-config-key-prefix: ${OLO_REDIS_ENGINE_CONFIG_KEY_PREFIX:olo:engine:config:}
  templates-dir: ${OLO_TEMPLATES_DIR:../template}
  components-dir: ${OLO_COMPONENTS_DIR:../components}
  plugins-dir: ${OLO_PLUGINS_DIR:../components/plugins}
  plugin-schemas-path: ${OLO_PLUGIN_SCHEMAS_PATH:classpath:plugin-schemas/}
